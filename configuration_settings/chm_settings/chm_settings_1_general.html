<html>

<head>
<meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=gb2312">
<LINK href="/cn.css" type=text/css rel=StyleSheet>
<title>常规对话框</title>
</head>

<body bgcolor="white">
<H2 align=left><font face="Tahoma"> CHM设置 - 常规对话框</font></H2>                                      
<hr noshade size="1" color="#000080">

<p>您可以通过在<a href="../../interface/easy_chm_interface_6_compile.html">编译设置对话框</a>里按&quot;CHM设置...&quot;按钮, 然后在"CHM设置"对话框里选取&quot;常规&quot;跳格看到这个对话框。关于这个对话框的使用请看下面的具体描述.&nbsp;</p>  

<p><img border="0" src="../../images/dialog_chmsettings_general.gif"></p>

<p><i><b>支持全文检索</b></i>:<br>
决定Easy CHM是否制作带全文检索的CHM文件.<br>                               
快速全文检索是CHM格式的一个重要功能，全文检索支持在正文里高亮显示搜索到的关键词.<br>
支持全文检索的CHM文件大小将会增加，因为CHM里保存了相应的检索信息，以便实现快速检索。
<br>
选择 <i>支持全文检索</i> 则Easy CHM在制作过程中会将全文检索信息包括在CHM中。</p>                                
<p><b>全文检索只对文件名是.h*的源文件有效，也就是说：在CHM里您只能在源文件名是.htm/.html的网页文件里进行检索</b>，在CHM里您无法检索源文件名是.txt或.shtml之类的文件里的内容；基于CHM格式的这一特性，如果您不希望某个文件的内容在CHM里被检索，可以在制作前修改源文件的文件名就可以实现，比如把原来的文件名1.html修改为1.shtml。<br><br>
<br><b>为了正常使用CHM强大的全文检索功能 ,请注意以下几点：</b></p>             
<ol>
  <li><b>您最好确保网页源文件的网页的标题不为空</b>（就是&lt;TITLE&gt;&lt;/TITLE&gt;之间有标题文字）。</li>
  <li><b>编译前请不要选中<i>创建二进制TOC</i>这个选项 - </b>通常情况下，当您输入要检索的关键词并开始查找后，CHM会在搜索列表里列出所有符合项所在的网页的标题（<b>您最好确保网页源文件的网页的标题不为空</b>），这时点击任意的标题，CHM会自动打开标题所代表的网页；但是当您选中<b><i>创建二进制TOC</i>这个选项</b>之后，CHM有可能无法正确打开标题所对应的网页<b><i>。</i></b></li>
  <li><b>在<a href="../../images/dialog_chmsettings_panes.gif">面板对话框</a>里必须设置选中“显示导航面板、按钮栏和主题面板”并显示搜索面板，这样您才可以在CHM里输入要搜索的词。</b></li>
  <li><b>全文检索只对文件名是.h*的源文件有效。</b></li>
  <li><b>全文检索会增大CHM的文件体积-因为里面保存了全文检索信息（通常这时CHM的文件体积是不包括全文检索信息的一倍），同时也会大大增加编译CHM的时间。</b></li>
  <li><b>确保您的系统文件没有缺少或被损坏 -</b><b> </b>如果您正确地像上面所讲的设置了选项并成功地制作了带全文检索的CHM，但却无法搜索，请更新您的IE或者通过下载微软提供的hhupd.exe来更新或修复您的系统文件          
    - 您的系统目录下必须存在“itircl.dll”这个系统文件 -          
    在您安装微软操作系统的时候这个文件默认是自动安装的。</li>
</ol>

<p><i><b>创建二进制索引</b></i>:<br>
决定是否以二进制形式保存CHM的索引列表-特别是对于索引项目比较多的时候，如果使用二进制格式，在打开CHM文件时，可以大大加快文件打开的速度。</p>                

<p>　</p>

<p><i><b>创建二进制TOC</b></i>:<br>
决定是否以二进制形式保存CHM的目录列表-特别是对于目录项目比较多的时候，如果使用二进制格式，在打开CHM文件时，可以大大加快文件打开的速度。<br> <b>但是，选中这个选项后，您在CHM目录里的自定义图标将被忽略-CHM将只显示两种基本图标</b>。 <br>
<b>如果您希望在CHM的工具栏显示支持顺序浏览的“上一步”、“下一步”这两个按钮，则您必须先选中<i>创建二进制TOC</i></b>，只有这样，制作好的CHM文件的工具栏上才会显示                  
“上一步”、“下一步”这两个按钮.
<br><i>创建二进制TOC</i>也会带来很多不利的影响，比如使用全文检索的时候无法正常返回当前网页标题的主题；CHM目录里的自定义图标将被忽略（只显示两种基本图标）；这样制作的CHM文件无法与其他CHM文件合并。<br><b>对于普通用户，或者对于那些不希望使用</b><b>“上一步”、“下一步”这两个按钮的用户，或者对于那些比较看中自定义图标或全文检索的用户，作者建议您不要选中这个选项，程序默认不选。</b><br>

</p>  

<p><i><b>创建CHI文件</b></i>:<br>
决定是否把CHM的目录索引等信息分开保存在单独的与CHM同名的.chi文件里-这样的好处是对提高CHM打开时的速度有帮助，但是，不利的地方是：在分发制作好的CHM文件给其他人时，也必须同时提供这个与CHM文件同名的.chi文件，否则将打不开CHM文件。所以作者不建议大家选中这个选项--除非您的CHM目录或索引信息过于庞大，<b>作者建议您不要选中这个选项，程序默认不选</b>。</p> 

<p><i><b>自动保存记录文件</b></i>:<br>
决定在编译的过程中是否保存整个编译过程的所有信息.<br>
<b>当您遇到CHM编译失败无法生成CHM的情况时，建议选中这个选项，您可以查看编译过程的记录信息，找到是卡壳在哪个具体的文件，这样可以方便您分析或排除文件里的错误，找到编译失败的原因，以便成功编译CHM。</b>
<br>
如果设置了 <i>自动保存记录文件 </i>则程序会自动在CHM工程文件所在的根目录下生成一个'_ecErrorLog.Log'的记录文件<i>。</i></p>             

<p><b>导致CHM编译失败的主要因素（供您分析失败原因时参考）</b>：
</p> 

<ol>
  <li><b>无效的源文件文件名或目录名 - CHM格式能够很好地支持标准文件名，比如：a~z；A~Z；0~9以及下划线_</b>。但是CHM格式不能支持带空格或符号“&amp;”等的文件名（其原因，根据作者的判断，是微软的CHM系统存在BUG，微软的CHM编译器会像网站上处理网络地址那样把文件名里的空格等特殊字符自动转换为%20等URL地址的形式，但在读取的时候，却仍在找原来的带空格的文件名，这样的结果肯定是“文件或页面无法找到”--尽管文件实际就在CHM里；在这个BUG得到纠正前，建议您只使用前面讲的标准文件名）。无效的源文件文件名不一定会导致编译失败，但其结果是您无法正常使用制作好的CHM文件，比如出现“页面找不到”或图片无法显示的错误。基于前面的考虑，<b>作者建议您尽量避免使用中文作为文件名，以免遇到不可预期的错误</b>。</li> 
  <li><b>在文件名里使用了误导CHM编译器的扩展名</b>，比如类似001.html.gif或002.html.exe这样的错误描述文件格式的文件名，CHM文件系统会认为001.html.gif或002.html.exe是一个网页而尝试去分析里面的链接或尝试分析里面的检索信息，如果001.html.gif是一个图片而002.html.exe是一个EXE文件的话，那有时CHM将会无法编译并“假死”在那里,更重要的是:     
    即便您的CHM文件最后编译成功,001.ht1.gif这样的图片也无法正常显示     
    - 您看到的会是个红色的X二不是图片。</li>    
  <li><b>您的所有源文件都不要使用类似&quot;xxx.Hxxx.xxx&quot;这样的文件名或目录名</b>,    
    比如&quot;001.ht1.gif&quot;&nbsp;或者&quot;\www.honestxx.com&quot;或者&quot;\2.html.files&quot;,    
    这些文件或目录名可以修改为&quot;001_ht1.gif&quot;&nbsp;或者&quot;\www_honestxx.com&quot;或者&quot;\2_html.files&quot;.</li>
  <li><b>源文件名或目录名里不要包括类似'&amp;' 或 '#'这样的特殊字符</b>, 比如, 像'123#ebook.html' 或 '123&amp;456.html'这样的文件名可能会导致在生成的CHM里出现导航错误.</li>    
  <li><b>某个网页源文件损坏-网页内容不完全或里面有某些二进制字符等</b>，导致CHM编译器一直在尝试在不完全或错误的信息里读出需要的指令，这也会导致无法编译并“假死”在那里。</li>
  <li><b>您使用的网页制作工具在网页里添加了不规范的网页指令</b>导致CHM编译器无法编译并“假死”在那里。我们都希望浏览器具有很高的容错性，而IE的容错性就比较好，但是，作者一直认为CHM格式只能是作为IE浏览器的子集而存在，至少目前如此，所以在功能上、容错性等方面不如IE；而CHM格式需要微软的维护，为了制作CHM我们只能先适应它目前的要求。当您在编译过程中遇到长久停在某个文件，而您又知道这个文件并没有那么大足以消耗那么多的时间去分析，不妨自己仔细分析一下这个网页文件的内容，看是否有什么特殊的地方导致编译无法继续。</li>
  <li><b>内存或硬盘（尤其是系统所在的盘符）不足导致编译失败</b>，这主要出现在制作比较大的CHM时，您不妨关闭一些程序或整理出更多的磁盘空间再编译。<br><br><br>
  </li>
</ol>

<p><i><b>自动删除在CHM的生成过程中产生的HHP/.HHC/.HHK</b></i>:<br>
决定Easy CHM是否自动删除编译CHM的标准工程文件-仅注册用户可以设置这个选项。<br><b>如果您使用的是未注册版本，程序都将自动删除全部的HHP/.HHC/.HHK标准工程文件-无论是否选中。</b></p>          

<p><i><b>CHM里不保存目录信息</b></i>:<br>
决定CHM文件里的内部文件列表是否包括目录信息.<br>  
<b>  
请务必慎用此选项，通常情况下您可以忽略这个选项--不要选中，程序默认不选</b>。
<br>
什么情况下需要选中<i>CHM里不保存目录信息</i>这个选项呢？
<br>当您的源文件全部都在同一个目录下（任何子目录或其他目录下都没有您需要的源文件），选中这个选项可以从一定程度上避免把子目录或其他目录下的文件压缩到CHM文件里（<i>CHM里不保存目录信息</i>就意味着有覆盖同名文件内容的风险），以避免CHM文件臃肿。
<br>
需要注意的是：
<br>
如果您指定的网页里指向了其他目录下的文件，尽管您选中了<i>CHM里不保存目录信息，</i>微软的CHM编译器仍会尝试着把指定的文件加入到CHM里--但是去掉了该文件的目录信息，如果这个文件与您当前目录下的文件同名，则会造成不必要的文件覆盖，也就是说：您制作的CHM可能会存在错误。规避这种情形发生有两种方法：</p>
<ol>
  <li>在网页里的链接不要指向您不需要的文件；</li>
  <li>尽量不要使用相同文件名。</li>
</ol>
<p>
其中，第一点尤其重要，特别是当您不希望制作臃肿的包括很多无关文件的CHM时。
<br>在以下两种情况下，请千万不要选中<i>CHM里不保存目录信息</i>，以免丢失文件，造成CHM显示不正常或图片无法显示：</p>
<ol>
  <li>您的源文件的图片都保存在单独的子目录里-比如WORD保存的网页里的图片都保存在单独的子目录下；</li>
  <li>您的源文件在不同的子目录里；</li>
</ol>
<p>

<i>CHM里不保存目录信息</i>这个选项对于像<a href="http://www.etextwizard.com/cn/etextwizard.html" target=_blank>“电子文档处理器”</a>那种支持批量制作CHM文件的程序非常有意义，因为可以防止把不必要的文件添加到CHM文件里。

<br>
选择 <i>CHM里不保存目录信息</i> 则CHM将不会保存任何目录信息--注意：如果两个文件的文件名完全相同，其中一个的文件内容将被另一个覆盖。</p>   

<p><i><b>CHM窗体总是在最前端</b></i>:<br>
决定CHM窗体是否总在其他窗体之上。</p>     

<p><i><b>允许CHM记忆窗体的位置和大小</b></i>:<br>
决定CHM是否记忆当前的窗体位置和大小，以便下次使用。<br>
不选则每次CHM都使用制作时候定义的窗体位置及大小。</p>
<p><i><b>显示MSDN菜单</b></i>:<br>
决定是否显示MSDN的菜单。</p>

<p><i><b>支持增强反编译</b></i>:<br>
决定是否支持最大限度的恢复CHM的编译信息.<br>
这个选项目前的意义不大，因为无论选中与否，<a href="http://www.etextwizard.com/cn/chmdecompiler.html" target=_blank>ChmDecompiler</a>都可以反编译并完美恢复CHM的工程文件，也就是CHM的编译信息。</p>     

<p>　</p>

<p>&nbsp;请参见:<br>&nbsp;<a href="../../interface/easy_chm_interface_5_chmsettings.html">Easy CHM 界面 - CHM设置对话框</a></p> 

<br>
<br>
<br><br><br><br>
<table width="100%" cellspacing="0" cellpadding="0"
style="margin-top: 0pt; border-collapse: collapse;"> 
<tr> <td align="right" style="background-color=white; border-top: 1px solid gray;"> 
<a href="http://www.etextwizard.com/cn/" target="_blank" style="font-family: Tahoma, Verdana;
 font-size: 11px; text-decoration: none;">版权所有 &copy; 2000-2007  国华软件 保留全部权利.</a> 
</TD>
</TR></table>
</body>
</html>